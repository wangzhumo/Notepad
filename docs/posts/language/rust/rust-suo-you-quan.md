---
title: Rust 学习笔记-所有权
lang: zh-CN
tags:
  - Rust
date: 2022-08-23
---

### 所有权规则

1. Rust 中的每一个值都有一个被称为其 所有者（owner）的变量。
2. 值在任一时刻有且只有一个所有者。
3. 当所有者（变量）离开作用域，这个值将被丢弃。

### 变量作用域

作用域（scope）,是一个项（item）在程序中有效的范围

```rust
fn main() {
    let s = "world";
    {                      // s 在这里无效, 它尚未声明
        let s = "hello";   // 从此处起，s 是有效的

        // 使用 s
        println!("内部 {s}")
    }                      // 此作用域已结束，s 不再有效
    println!("外部 {s}")
}
```

运行结果是:
```rust
内部 hello
外部 world
```

**变量和其有效的作用域**
* 当 s 进入作用域 时，它就是有效的。
* 这一直持续到它 离开作用域 为止。


### 内存与分配
Rust 采取了一个不同的策略：内存在拥有它的变量离开作用域后就被自动释放。

#### 1.变量与数据交互的方式-移动

```rust
let s1 = String::from("hello");
let s2 = s1;
```